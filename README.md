# GPX Трекер

Веб-приложение для управления, редактирования и визуализации GPS-треков прямо в браузере.

**Назначение:** сопровождение и визуализация процесса зимнего маршрутного учёта (ЗМУ) в охотничьих угодьях: фиксация, хранение и анализ прохождения утверждённых маршрутов, включая подготовку (затирку) и учёт, с привязкой к карте и наглядным отображением всех этапов.

**[Live Demo](https://hail3b.github.io/TrackGPX/)**

## Возможности

**Работа с треками**
- Загрузка GPX-файлов (поддержка множественного выбора)
- Создание новых треков вручную на карте
- Клонирование существующих треков
- Экспорт в стандартный GPX и Garmin GPX формат

**Редактирование**
- Перетаскивание точек трека на карте
- Добавление и удаление точек
- Удаление сегментов трека (до/после выбранной точки)
- Реверс направления трека
- Объединение сегментов
- Установка времени начала с автоматическим расчётом для всех точек

**Данные высот**
- Автоматическое получение высот через Open-Elevation API
- Кэширование для оптимизации запросов
- Расчёт набора и сброса высоты

**Типы сегментов**
- Пешком (walk) — 5 км/ч
- Лыжи (ski) — 8 км/ч
- Снегоход (snowmobile) — 20 км/ч
- Визуальное различие стилей линий

**Карты**
- OpenStreetMap (основной слой)
- Спутниковые снимки (Esri)
- CartoDB Positron
- Рельеф (Stamen Terrain)

**Интерфейс**
- Адаптивный дизайн для мобильных устройств
- Боковая панель со списком треков
- Статистика: расстояние, время, скорость, высоты
- Контекстные меню для быстрых действий
- Маркеры начала и конца трека

## Использование

### Локально

```bash
# Просто откройте файл в браузере
open index.html

# Или запустите локальный сервер
python3 -m http.server 8000
```

## Технологии

| Технология | Версия | Назначение |
|------------|--------|------------|
| [Leaflet.js](https://leafletjs.com/) | 1.9.4 | Интерактивные карты |
| [toGeoJSON](https://github.com/mapbox/togeojson) | — | Парсинг GPX |
| Vanilla JS | ES6+ | Логика приложения |

## Архитектура

Приложение реализовано как монолитный HTML-файл (~5500 строк):

```
index.html
├── CSS (~700 строк)     — стили и адаптивность
├── HTML (~60 строк)     — минимальная разметка
└── JavaScript (~4800 строк)
    ├── Инициализация карты
    ├── Загрузка и парсинг GPX
    ├── Редактирование треков
    ├── Работа с высотами
    ├── Экспорт данных
    └── Сохранение в sessionStorage
```

**Принципы:**
- Нет сборки и зависимостей npm
- Нет бэкенда — всё работает на клиенте
- Данные хранятся в sessionStorage браузера
- Автоматический деплой на GitHub Pages

## Разработка

```bash
# Клонировать репозиторий
git clone https://github.com/user/TrackGPX.git
cd TrackGPX

# Открыть в браузере
open index.html

# Для отладки используйте DevTools браузера
```

**Структура данных трека:**

```javascript
{
  name: "Название трека",
  color: "#FF0000",
  geoJson: {
    type: "FeatureCollection",
    features: [{
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [[lon, lat, elevation], ...]
      },
      properties: {
        coordTimes: ["2024-01-01T10:00:00Z", ...],
        elevations: [100, 105, ...],
        segmentTypes: ["walk", "ski", ...]
      }
    }]
  }
}
```

## Деплой

Автоматический деплой на GitHub Pages при пуше в `main` или `master`:

```yaml
# .github/workflows/deploy.yml
on:
  push:
    branches: [main, master]
```

## Лицензия

MIT

© 2024 Максим, TrackGPX
